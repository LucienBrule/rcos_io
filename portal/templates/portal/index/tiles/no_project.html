{% load portal_extras %}

<h2 class="title is-4 mb-2">Choose a Project</h2>

<div class="is-flex is-flex-direction-column is-flex-grow-1">
    <p>Here's a list of projects that are actively seeking members to join. Check out their pitch and contact the Project Lead if you are interested!</p>
    
    <div class="is-flex-grow-1" style="overflow:auto; max-height: 600px;">
        <hr>
        {% for pitch in active_semester.project_pitches.all %}
        <div class="block">
            <a class="is-block subtitle mb-0" href="{{ pitch.project.get_absolute_url }}{% active_semester_query %}">{{ pitch.project }}</a>
            
            <small class="has-text-grey">{{ pitch.project.summary }}</small>
            
            <div>
                {% for tag in pitch.project.tags.all %}
                <small class="tag is-light">{{ tag }}</small>
                {% endfor %}
            </div>
            
            <small>
                <a href="{{ pitch.url }}" target="_blank">View Pitch</a>
                {% if pitch.project.discord_text_channel_url %}
                /
                <a href="{{ pitch.project.discord_text_channel_url }}" target="_blank">Discuss on Discord</a>
                {% endif %}
            </small>
            <hr>

        </div>
        {% empty %}
        <p class="has-text-grey">None have been proposed yet! Check back again soon.</p>
        {% endfor %}
        </ul>
    </div>
    {% if can_propose_project %}
    <a href="{% url 'projects_propose' %}" class="button is-primary is-outlined mb-2">Propose Project</a>
    {% endif %}
    <a href="{% url 'projects_index' %}?semester={{ active_semester.pk }}" class="button is-block is-link is-outlined">View All {{ active_semester }} Projects</a>
</div>
